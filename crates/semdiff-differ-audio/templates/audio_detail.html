<style>
  .audio-detail {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .audio-detail__section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .audio-detail__meta {
    font-size: 0.9rem;
    color: var(--status-neutral-text-muted);
  }

  .audio-detail__media {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .audio-detail__media-group,
  .audio-detail__diff-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 0.75rem;
  }

  .audio-detail__media-pair,
  .audio-detail__diff-pair {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .audio-detail__media .tint,
  .audio-detail__diff .tint {
    border: 1px solid var(--status-neutral-border);
    border-radius: 0.25rem;
    background: var(--status-neutral-surface);
  }

  .audio-detail__media .tint__img,
  .audio-detail__diff .tint__img {
    width: 100%;
    height: auto;
    max-width: 100%;
    object-fit: contain;
  }

  .audio-detail audio {
    width: 100%;
  }

  .audio-detail__diff {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  @media (max-width: 1024px) {
    .audio-detail__media-group,
    .audio-detail__diff-group {
      grid-template-columns: 1fr;
    }
  }
  </style>
<div class="audio-detail">
  {% match self.detail %}
  {% when AudioDetailBody::Diff with { expected, actual, spectrogram_diff } %}
  <section class="audio-detail__section">
    <h3>Expected</h3>
    <audio controls src="{{ expected.audio_src }}"></audio>
    <div class="audio-detail__media">
      <div class="audio-detail__media-group">
        {% for (waveform_image, spectrogram_image) in expected.waveforms.iter().zip(expected.spectrograms.iter()) %}
        <div class="audio-detail__media-pair">
          <span class="tint tint--waveform">
            <img class="tint__img" src="{{ waveform_image.uri }}" alt="Expected waveform" width="{{ waveform_image.width }}" height="{{ waveform_image.height }}" />
          </span>
          <span class="tint tint--spectrogram">
            <img class="tint__img" src="{{ spectrogram_image.uri }}" alt="Expected spectrogram" width="{{ spectrogram_image.width }}" height="{{ spectrogram_image.height }}" />
          </span>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="audio-detail__meta">
      Sample rate: {{ expected.sample_rate }} Hz · Channels: {{ expected.channels }} · Duration: {{ expected.duration_seconds }} sec
    </div>
  </section>
  <section class="audio-detail__section">
    <h3>Actual</h3>
    <audio controls src="{{ actual.audio_src }}"></audio>
    <div class="audio-detail__media">
      <div class="audio-detail__media-group">
        {% for (waveform_image, spectrogram_image) in actual.waveforms.iter().zip(actual.spectrograms.iter()) %}
        <div class="audio-detail__media-pair">
          <span class="tint tint--waveform">
            <img class="tint__img" src="{{ waveform_image.uri }}" alt="Actual waveform" width="{{ waveform_image.width }}" height="{{ waveform_image.height }}" />
          </span>
          <span class="tint tint--spectrogram">
            <img class="tint__img" src="{{ spectrogram_image.uri }}" alt="Actual spectrogram" width="{{ spectrogram_image.width }}" height="{{ spectrogram_image.height }}" />
          </span>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="audio-detail__meta">
      Sample rate: {{ actual.sample_rate }} Hz · Channels: {{ actual.channels }} · Duration: {{ actual.duration_seconds }} sec
    </div>
  </section>
  {% if spectrogram_diff.len() > 0 %}
  <section class="audio-detail__section">
    <h3>Diff</h3>
    <div class="audio-detail__diff">
      <div class="audio-detail__diff-group">
        {% for image in spectrogram_diff %}
        <div class="audio-detail__diff-pair">
          <span class="tint tint--spectrogram-diff">
            <img class="tint__img" src="{{ image.uri }}" alt="Spectrogram diff" width="{{ image.width }}" height="{{ image.height }}" />
          </span>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>
  {% endif %}
  {% when AudioDetailBody::Single with { data } %}
  <section class="audio-detail__section">
    <h3>{{ data.label }}</h3>
    <audio controls src="{{ data.audio_src }}"></audio>
    <div class="audio-detail__media">
      <div class="audio-detail__media-group">
        {% for (waveform_image, spectrogram_image) in data.waveforms.iter().zip(data.spectrograms.iter()) %}
        <div class="audio-detail__media-pair">
          <span class="tint tint--waveform">
            <img class="tint__img" src="{{ waveform_image.uri }}" alt="Waveform" width="{{ waveform_image.width }}" height="{{ waveform_image.height }}" />
          </span>
          <span class="tint tint--spectrogram">
            <img class="tint__img" src="{{ spectrogram_image.uri }}" alt="Spectrogram" width="{{ spectrogram_image.width }}" height="{{ spectrogram_image.height }}" />
          </span>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="audio-detail__meta">
      Sample rate: {{ data.sample_rate }} Hz · Channels: {{ data.channels }} · Duration: {{ data.duration_seconds }} sec
    </div>
  </section>
  {% endmatch %}
</div>
